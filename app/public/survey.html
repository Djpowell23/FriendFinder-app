<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>FriendFinder Survey</title>
    <!-- Reset CSS -->
    <link rel='stylesheet' type='text/css' href='../../assets/css/reset.css'>
    <!-- Custom CSS -->
    <link rel='stylesheet' type='text/css' href='../../assets/css/style.css'>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

</head>

<!-- <body onload='clearForms()'>; -->

<body>
    <div class='container'>
        <h2><strong>Survey</strong></h2>
        <hr>
        <h3><strong>About You</strong></h3>
        <!-- Name and Photo Inputs -->
        <h4>Name (Required):</h4>
        <form>
            <input type='text' name='name' id='friendName' required>
        </form>
        <h4>Photo URL (Required):</h4>
        <form>
            <input type='text' name='photo' id='photoURL' required>
        </form>
        <hr>

        <!-- Question 1 -->
        <h3><strong>Question 1</strong></h3>
        <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
        <!-- Q1 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q1'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <!-- Question 2 -->
        <h3><strong>Question 2</strong></h3>
        <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
        <!-- Q2 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q2'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <!-- Question 3 -->
        <h3><strong>Question 3</strong></h3>
        <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
        <!-- Q3 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q3'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <!-- Question 4 -->
        <h3><strong>Question 4</strong></h3>
        <h4>You rarely do something just out of sheer curiosity.</h4>
        <!-- Q4 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q4'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <!-- Question 5 -->
        <h3><strong>Question 5</strong></h3>
        <h4>People can rarely upset you.</h4>
        <!-- Q5 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q5'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <!-- Question 6 -->
        <h3><strong>Question 6</strong></h3>
        <h4>It is often difficult for you to relate to other people’s feelings.</h4>
        <!-- Q6 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q6'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <!-- Question 7 -->
        <h3><strong>Question 7</strong></h3>
        <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
        <!-- Q7 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q7'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <!-- Question 8 -->
        <h3><strong>Question 8</strong></h3>
        <h4>You rarely get carried away by fantasies and ideas.</h4>
        <!-- Q8 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q8'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <!-- Question 9 -->
        <h3><strong>Question 9</strong></h3>
        <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or
            not.</h4>
        <!-- Q9 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q9'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <!-- Question 10 -->
        <h3><strong>Question 10</strong></h3>
        <h4>You feel more energetic after spending time with a group of people.</h4>
        <!-- Q10 Dropdown -->
        <select placeholder='Select a Value...' class='select' tabindex='1' id='q10'>
            <option value='1'>1 (Strongly Disagree)</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5 (Strongly Agree)</option>
        </select>
        <!-- ----------- -->
        <hr>
        <!-- Submit Button -->
        <button type='submit' class='btn btn-primary btn-lg btn-block' id='submit'>
            <i class='fa fa-check-circle' aria-hidden='true'></i>
            Submit
        </button>

        <!-- Footer -->
        <footer class='footer'>
            <div class='container'>
                <p>
                    <a href='/api/friends'>API Friends List</a>
                    |
                    <a href='https://www.github.com/Djpowell23/FriendFinder-app'>GitHub Repo</a>
                </p>
            </div>
        </footer>
    </div>

</body>

</html>

<script type='text/javascript'>

    function runFriendQuery() {
        $.ajax({
            url: '/api/friends',
            method: 'GET'
        }).then(function (friendsData) {
            console.log('friEnds data:', friendsData);
            console.log('--------------------------------');

            // Loop through and display each of the results
            for (var i = 0; i < friendsData.length; i++) {

            }
        });
    }

    runFriendQuery();

    $(document).ready(function () {
        var friendsArray;
        // Grab friends array from api
        $.get('/api/friends')
            .done(function (data) {
                // Stores data to variable
                friendsArray = data;
                // Return array to use
                return friendsArray;
            });

        $('#submit').on('click', function (event) {
            // Prevent Page Refresh
            event.preventDefault();

            // Make Sure Name and Photo Fields are filled
            if ($('#friendName').val() === '' || $('#photoURL').val() === '' || !$('#q1').val() || !$('#q2').val()
                || !$('#q3').val() || !$('#q4').val() || !$('#q5').val() || !$('#q6').val()
                || !$('#q7').val() || !$('#q8').val() || !$('#q9').val() || !$('#q10').val()
            ) {
                // Change to modal from alert later
                alert('Name and Photo fields required.');
            } else {
                // Grab all form values
                var newFriend = {
                    name: $('#friendName').val(),
                    photo: $('#photoURL').val(),
                    scores: [
                        $('#q1').val(),
                        $('#q2').val(),
                        $('#q3').val(),
                        $('#q4').val(),
                        $('#q5').val(),
                        $('#q6').val(),
                        $('#q7').val(),
                        $('#q8').val(),
                        $('#q9').val(),
                        $('#q10').val(),
                    ]
                }; // End of object
                // console.log(newFriend);

                // Post Request sending new friend to api/friends
                $.post('/api/friends', newFriend).done(function (data, res) {
                    console.log('data:', data); // true
                    console.log('res:', res); // success
                    console.log('new friend:', newFriend); // newFriend just added
                    console.log('friendsArray:', friendsArray); // array of existing friends
                    if (data) {
                        // Display the best calculated match
                    }

                    // Matchmaking Logic
                }); // End of Post function
                clearForms();
            }   // End of Else Statement
        }); // End of Submit Click Event
    }); // End of Ready Function

    // Clear forms on page load
    function clearForms() {
        $('#friendName').val('');
        $('#photoURL').val('');
        $('#q1').val(''),
            $('#q2').val(''),
            $('#q3').val(''),
            $('#q4').val(''),
            $('#q5').val(''),
            $('#q6').val(''),
            $('#q7').val(''),
            $('#q8').val(''),
            $('#q9').val(''),
            $('#q10').val('')
    };
</script>